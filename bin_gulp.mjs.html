<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>cantremember/node-sleepbot-cgi - Source: bin/gulp.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<a href="https://github.com/cantremember/node-sleepbot-cgi"><img
    style="position: fixed; top: 0; right: 0; border: 0;"
    src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
    alt="Fork me on GitHub"
    data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
></a>

<div id="main">
    <h1 class="page-title">Source: bin/gulp.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* istanbul ignore file */

import gulp from 'gulp';
import clean from 'gulp-clean';
import eslint from 'gulp-eslint';
import jsdoc from 'gulp-jsdoc3';

import JSDOC_CONFIG from '../.jsdoc.json';

// also @see Makefile
import PACKAGE_JSON from '../package.json';
const SOURCE_GLOBS = PACKAGE_JSON.nyc.include;


const GLOBS = Object.freeze({
  source: SOURCE_GLOBS,
  test:   [
    'test/bootstrap.mjs',
    'test/**/*.js',
    'test/**/*.mjs',
  ],
  views:  [ 'views/**' ],
});


function taskClean() {
  return gulp.src('build', {
    allowEmpty: true,
  })
  .pipe(clean({
    force: true,
  }));
}

/**
 * @see https://github.com/eslint/eslint
 * @see http://eslint.org/docs/user-guide/configuring
 * @see http://eslint.org/docs/rules/
 */
function taskLint() {
  const { source, test } = GLOBS;

  return gulp.src(
    source.concat(test)
  )
  .pipe(eslint({
    configFile: './.eslintrc',
    quiet: false,
    fix: false,
  }))
  .pipe(eslint.format())
  .pipe(eslint.failAfterError());
}

/**
 * @see https://github.com/jsdoc3/jsdoc
 * @see http://usejsdoc.org/
 */
function taskDoc(cb) {
  const { source, test } = GLOBS;
  const task = jsdoc(JSDOC_CONFIG, cb);

  return gulp.src(
    // the source file list seems to be disregarded;
    //   when i omit any part of the `source` JSON config,
    //   only '*.js' files get processed :(
    source.concat(test)
  )
  .pipe(task);
}

// gulp@4 made sequencing so darn easy
//   this is a worthless example because this Project doesn't *need* refinements
//   but it's good to remember how it gets done ;)
const taskDefault = gulp.series(
  taskLint,
  gulp.parallel( taskDoc )
);


gulp.task('clean', taskClean);
gulp.task('lint', taskLint);
gulp.task('doc', taskDoc);

gulp.task('default', taskDefault);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="app.html">app</a></li><li><a href="config.html">config</a></li><li><a href="lib.html">lib</a></li><li><a href="wwwRoot.html">wwwRoot</a></li></ul><h3>Global</h3><ul><li><a href="global.html#taskDoc">taskDoc</a></li><li><a href="global.html#taskLint">taskLint</a></li><li><a href="global.html#willTryServers">willTryServers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
